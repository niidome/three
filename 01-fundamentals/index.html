<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three の基礎知識</title>
    <script type="importmap">{
        "imports": {
            "three": "https://threejs.org/build/three.module.js"
        }
    }</script>
    <script type="module">
        import * as THREE from 'three';

        window.addEventListener('DOMContentLoaded', () => {

            function main() {
                const canvas = document.querySelector('#c');
                const renderer = new THREE.WebGLRenderer({ antialias: true, canvas });

                const fov = 75;
                const aspect = 2;  // the canvas default
                const near = 0.1;
                const far = 5;

                const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
                camera.position.z = 2;

                const scene = new THREE.Scene();

                const boxWidth = 1;
                const boxHeight = 1;
                const boxDepth = 1;
                const geometry = new THREE.BoxGeometry(boxWidth, boxHeight, boxDepth);
                const material = new THREE.MeshPhongMaterial({ color: 0x44aa88 });

                const cube = new THREE.Mesh(geometry, material);

                scene.add(cube);

                const color = 0xFFFFFF;
                const intensity = 3;
                const light = new THREE.DirectionalLight(color, intensity);
                light.position.set(-1, 2, 4);
                scene.add(light);

                renderer.render(scene, camera);

                function render(time) {
                    time *= 0.001;  // convert time to seconds

                    cube.rotation.x = time;
                    cube.rotation.y = time;
                    cube.rotation.z = time;

                    renderer.render(scene, camera);

                    requestAnimationFrame(render);
                }
                requestAnimationFrame(render);
            }

            main();
        });
    </script>
</head>

<body>
    <canvas id="c"></canvas>
</body>

</html>